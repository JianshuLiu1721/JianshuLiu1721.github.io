@inproceedings{10.1145/3423211.3425684,
author = {Zhang, Shungeng and Wang, Qingyang and Kanemasa, Yasuhiko and Liu, Jianshu and Pu, Calton},
title = {DoubleFaceAD: A New Datastore Driver Architecture to Optimize Fanout Query Performance},
year = {2020},
isbn = {9781450381536},
publisher = {Association for Computing Machinery},
address = {New York, NY, USA},
url = {https://doi.org/10.1145/3423211.3425684},
doi = {10.1145/3423211.3425684},
abstract = {The broad adoption of fanout queries on distributed datastores has made asynchronous event-driven datastore drivers a natural choice due to reduced multithreading overhead. However, through extensive experiments using the latest datastore drivers (e.g., MongoDB, HBase, DynamoDB) and YCSB benchmark, we show that an asynchronous datastore driver can cause unexpected performance degradation especially in fanout-query scenarios. For example, the default MongoDB asynchronous driver adopts the latest Java asynchronous I/O library, which uses a hidden on-demand JVM level thread pool to process fanout query responses, causing a surprising multithreading overhead when the query response size is large. A second instance is the traditional wisdom of modular design of an application server and the embedded asynchronous datastore driver can cause an im-balanced workload between the two components due to lack of coordination, incurring frequent unnecessary system calls. To address the revealed problems, we introduce DoubleFaceAD--a new asynchronous datastore driver architecture that integrates the management of both upstream and downstream workload traffic through a few shared reactor threads, with fanout-query-aware priority-based scheduling to reduce the overall query waiting time. Our experimental results on two representative application scenarios (YCSB and DBLP) show DoubleFaceAD outperforms all other types of datastore drivers up to 34% on throughput and 1.9\texttimes{} faster on 99th percentile response time.},
booktitle = {Proceedings of the 21st International Middleware Conference},
pages = {430â€“444},
numpages = {15},
keywords = {distributed datastores, performance, asynchronous, fanout queries},
location = {Delft, Netherlands},
series = {Middleware '20}
}